<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>NADA Multi-catalog using Single Database</title>

<style type='text/css' media='all'>@import url('../userguide.css');</style>
<link rel='stylesheet' type='text/css' media='all' href='../userguide.css' />

<script type="text/javascript" src="../nav/nav.js"></script>
<script type="text/javascript" src="../nav/prototype.lite.js"></script>
<script type="text/javascript" src="../nav/moo.fx.js"></script>
<script type="text/javascript" src="../nav/user_guide_menu.js"></script>

<meta http-equiv='expires' content='-1' />
<meta http-equiv= 'pragma' content='no-cache' />
<meta name='robots' content='all' />
<meta name='author' content='ExpressionEngine Dev Team' />
<meta name='description' content='CodeIgniter User Guide' />
</head>
<body>

<!-- START NAVIGATION -->
<div id="nav"><div id="nav_inner"><script type="text/javascript">create_menu('../');</script></div></div>
<div id="nav2"><a name="top"></a><a href="javascript:void(0);" onclick="myHeight.toggle();"><img src="../images/nav_toggle_darker.jpg" width="154" height="43" border="0" title="Toggle Table of Contents" alt="Toggle Table of Contents" /></a></div>
<div id="masthead">
<table cellpadding="0" cellspacing="0" border="0" style="width:100%">
<tr>
<td><h1>CodeIgniter User Guide Version 2.0.2</h1></td>
<td id="breadcrumb_right"><a href="../toc.html">Table of Contents Page</a></td>
</tr>
</table>
</div>
<!-- END NAVIGATION -->


<!-- START BREADCRUMB -->
<table cellpadding="0" cellspacing="0" border="0" style="width:100%">
<tr>
<td id="breadcrumb">
<a href="http://codeigniter.com/">CodeIgniter Home</a> &nbsp;&#8250;&nbsp;
<a href="../index.html">User Guide Home</a> &nbsp;&#8250;&nbsp;
<a href="index.html">Database Library</a> &nbsp;&#8250;&nbsp;
Database Caching Class
</td>
<td id="searchbox"><form method="get" action="http://www.google.com/search"><input type="hidden" name="as_sitesearch" id="as_sitesearch" value="codeigniter.com/user_guide/" />Search User Guide&nbsp; <input type="text" class="input" style="width:200px;" name="q" id="q" size="31" maxlength="255" value="" />&nbsp;<input type="submit" class="submit" name="sa" value="Go" /></form></td>
</tr>
</table>
<!-- END BREADCRUMB -->


<br clear="all" />


<!-- START CONTENT -->
<div id="content">

<h1>NADA 4 (with multi-catalog)</h1>
<h2>Repository</h2>
<p>A repository represents a collection of studies in a catalog. A catalog can have one or more repositories. There are two types of repositories:</p>
<p>a. Internal Repositories</p>
<p>b. External Repositories</p>
<h2>Internal Repositories</h2>

<p>An internal repository is a local repository and does not use harvester to be created. The repository is created locally and studies are added using the DDI Upload or DDI Import. Following are the required fields for defining a internal repository:</p>

<ul>
<li>Repository Type: internal</li>
<li>Repository Identification: A unique name given to the repository. e.g. LSMS, IE, LAC, etc. The name is not changeable once you have added studies to the repository. Also make sure the name does not contain spaces or special characters.</li>
<li>Title: This is the full name or title of the repository.</li>
<li>URL(optional): You can use this field to point to the external website of the repository. e.g. www.enterprisesurveys.org</li>
<li>Organization: Name of the organization</li>
<li>Country: Name of the country</li>
<li>thumbnail: Provide a thumbail (?? x ??) image for the repository.</li>
<li>Short Description: Provide a 250 characters long description of the repository</li>
<li>Long Description: Provide a long description of the repository. This should be in an HTML and have an image. This field is used for the creating the About page for the repository.</li>
</ul>

<h2>External Repositories</h2>
<p>An external repository is a harvested repository and uses the harvester to be managed. The external repository is displayed similar to an external repository except that a message is displayed on the study information page stating that the data and resources are available from the originating external website.</p>
<p>To create an external repository, the steps and required fields are same as the internal repo.</p>

<h2>Study ID and multiple repositories</h2>

<p>Upto NADA 3, it was possible to upload the same study to different repositories in the same instance of NADA which results in duplicate surveys in the nada catalog.</p>
<p>With NADA 4, duplicate survey IDs are not allowed at all. Each study must have a unique study ID. </p>
<p><strong>TODO: will need to review the harvester as this change will break the harvester.</strong></p>
<h2>DDI Upload &amp; Batch Import DDI</h2>

<p>It is now required to select a repository to upload a DDI. For nada not using the multi-catalog features, they will be required to select the Repo. Every nada has a default repo defined so for single catalog nada, the default repo will be selected by default.</p>
<p><br />
</p>
<h1>Function Reference</h1>



<h2>$this->db->cache_on()&nbsp; / &nbsp; $this->db->cache_off()</h2>

<p>Manually enables/disables caching.  This can be useful if you want to
keep certain queries from being cached.  Example:</p>

<code>
// Turn caching on<br />
$this->db->cache_on();<br />
$query = $this->db->query("SELECT * FROM mytable");<br />
<br />
// Turn caching off for this one query<br />
$this->db->cache_off();<br />
$query = $this->db->query("SELECT * FROM members WHERE member_id = '$current_user'");<br />
<br />
// Turn caching back on<br />
$this->db->cache_on();<br />
$query = $this->db->query("SELECT * FROM another_table");
</code>


<h2>$this->db->cache_delete()</h2>

<p>Deletes the cache files associated with a particular page. This is useful if you need to clear caching after you update your database.</p>

<p>The caching system saves your cache files to folders that correspond to the URI of the page you are viewing.  For example, if you are viewing
a page at <dfn>example.com/index.php/blog/comments</dfn>, the caching system will put all cache files associated with it in a folder
called <dfn>blog+comments</dfn>.  To delete those particular cache files you will use:</p>

<code>$this->db->cache_delete('blog', 'comments');</code>

<p>If you do not use any parameters the current URI will be used when determining what should be cleared.</p>


<h2>$this->db->cache_delete_all()</h2>

<p>Clears all existing cache files.  Example:</p>

<code>$this->db->cache_delete_all();</code>










</div>
<!-- END CONTENT -->


<div id="footer">
<p>
Previous Topic:&nbsp;&nbsp;<a href="call_function.html">Custom Function Calls</a>
&nbsp;&nbsp;&nbsp;&middot;&nbsp;&nbsp;
<a href="#top">Top of Page</a>&nbsp;&nbsp;&nbsp;&middot;&nbsp;&nbsp;
<a href="../index.html">User Guide Home</a>&nbsp;&nbsp;&nbsp;&middot;&nbsp;&nbsp;
Next Topic:&nbsp;&nbsp;<a href="forge.html">Database manipulation with Database Forge</a>
</p>
<p><a href="http://codeigniter.com">CodeIgniter</a> &nbsp;&middot;&nbsp; Copyright &#169; 2006 - 2011 &nbsp;&middot;&nbsp; <a href="http://ellislab.com/">EllisLab, Inc.</a></p>
</div>

</body>
</html>